/* 
 * WinJS Contrib v2.0.2.0
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

function HSL(n,t,i){var e={h:n,s:t,l:i,addH:function(n){this.h=this.h+n},addS:function(n){this.s=this.s+n},addL:function(n){this.l=this.l+n},toString:function(){return"hsl("+this.h+","+this.s+"%, "+this.l+"%)"},clone:function(n,t,i){var e=new HSL(this.h,this.s,this.l);return e.addH(n),e.addS(t),e.addL(i),e}};return e}var WinJSContrib=WinJSContrib||{};WinJSContrib.UI=WinJSContrib.UI||{},WinJSContrib.Utils=WinJSContrib.Utils||{},function(n){n.fn.winControl=function(){return this[0].winControl}}(jQuery),function(n){function t(t){var i=t.currentTarget||t.target,e=i.mcnTapTracking;if(e&&(void 0===t.button||0===t.button||e.allowRickClickTap&&2===t.button)){e.lock&&(t.pointerId&&t.currentTarget.setPointerCapture&&t.currentTarget.setPointerCapture(t.pointerId),t.preventDefault());var a=n(t.currentTarget);a.addClass("tapped"),e.pointerdown=t.changedTouches?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY},e.animDown(t.currentTarget),e.tapOnDown&&e.callback(i)}}function i(t){var i=t.currentTarget||t.target,e=i.mcnTapTracking;if(e&&e.pointerdown){var a=n(i);a.removeClass("tapped"),t.pointerId&&i.releasePointerCapture&&i.releasePointerCapture(t.pointerId),e.disableAnimation||e.animUp(t.currentTarget)}}function e(t){var i=t.currentTarget||t.target,e=i.mcnTapTracking;if(e&&(void 0===t.button||0===t.button||e.allowRickClickTap&&2===t.button)){var a=n(i);if(i.releasePointerCapture&&i.releasePointerCapture(t.pointerId),e&&!e.tapOnDown){t.stopPropagation();var r=function(){if(e&&e.pointerdown){if(t.changedTouches)var n=Math.abs(e.pointerdown.x-t.changedTouches[0].clientX),a=Math.abs(e.pointerdown.y-t.changedTouches[0].clientY);else var n=Math.abs(e.pointerdown.x-t.clientX),a=Math.abs(e.pointerdown.y-t.clientY);e.callback&&15>n&&15>a&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e.callback(i)),e&&e.pointerdown&&(e.pointerdown=void 0)}};e.awaitAnim?e.animUp(i).done(r):(e.animUp(i),r())}a.removeClass("tapped")}}n.fn.tap=function(a,r){var o=r||{};return this.each(function(){var r=n(this);r.addClass("tap"),this.mcnTapTracking&&this.mcnTapTracking.dispose(),this.mcnTapTracking=this.mcnTapTracking||{},this.mcnTapTracking.eventTracker=new WinJSContrib.UI.EventTracker,this.mcnTapTracking.disableAnimation=o.disableAnimation,this.mcnTapTracking.disableAnimation?(this.mcnTapTracking.animDown=function(){return WinJS.Promise.wrap()},this.mcnTapTracking.animUp=function(){return WinJS.Promise.wrap()}):(this.mcnTapTracking.animDown=o.animDown||WinJS.UI.Animation.pointerDown,this.mcnTapTracking.animUp=o.animUp||WinJS.UI.Animation.pointerUp),this.mcnTapTracking.element=this,this.mcnTapTracking.callback=a,this.mcnTapTracking.lock=o.lock,this.mcnTapTracking.awaitAnim=o.awaitAnim||!1,this.mcnTapTracking.disableAnimation=o.disableAnimation,this.mcnTapTracking.tapOnDown=o.tapOnDown,this.mcnTapTracking.pointerModel="none",this.mcnTapTracking.dispose=function(){this.element.classList.remove("tap"),this.eventTracker.dispose(),this.element.mcnTapTracking=null,this.element=null},void 0!==this.onpointerdown?(this.mcnTapTracking.pointerModel="pointers",this.mcnTapTracking.eventTracker.addEvent(this,"pointerdown",t),this.mcnTapTracking.eventTracker.addEvent(this,"pointerout",i),this.mcnTapTracking.eventTracker.addEvent(this,"pointerup",e)):window.Touch&&!o.noWebkitTouch?(this.mcnTapTracking.pointerModel="touch",this.mcnTapTracking.eventTracker.addEvent(this,"touchstart",t),this.mcnTapTracking.eventTracker.addEvent(this,"touchcancel",i),this.mcnTapTracking.eventTracker.addEvent(this,"touchend",e)):(this.mcnTapTracking.pointerModel="mouse",this.mcnTapTracking.eventTracker.addEvent(this,"mousedown",t),this.mcnTapTracking.eventTracker.addEvent(this,"mouseleave",i),this.mcnTapTracking.eventTracker.addEvent(this,"mouseup",e))})},n.fn.untap=function(){return this.each(function(){n(this);this.mcnTapTracking&&this.mcnTapTracking.dispose()})},jQuery.fn.hatchShow=function(){n(".hsjs").css("visibility","hidden").css("font-size","").css("display","inner-block").css("white-space","pre").each(function(){var t=n(this),i=t.parent();i.hasClass("hatchshow_temp")?i=i.parent():t.wrap("<span class='hatchshow_temp' style='display:block'>");var e=i.width();for(t.width();t.width()<e;){var a=t.fontSize();if(a>200)break;t.css("font-size",a+1+"px"),function(){for(;t.width()>e;){var n=t.fontSize();if(8>n)break;t.css("font-size",n-.1+"px")}}}}).hide().css("visibility","").fadeIn()},jQuery.fn.fontSize=function(){return parseInt(n(this).css("font-size").replace("px",""))}}(jQuery),function(n){n.fn.pressEnterDefaultTo=function(t,i){return this.each(function(){var e=n(this);e.keypress(function(e){var a=e.which?e.which:e.keyCode;if(13==a){var r=i?n(t,i):n(t);jQuery(this).blur(),e.preventDefault(),e.stopPropagation(),r[0].mcnTapTracking&&r[0].mcnTapTracking.callback&&r[0].mcnTapTracking.callback(r[0]),r.focus().click()}})})},n.fn.onPressEnter=function(t){return this.each(function(){var i=n(this);i.keypress(function(n){var i=n.which?n.which:n.keyCode;13==i&&(jQuery(this).blur(),n.preventDefault(),t&&t())})})},n.fn.throttleTextChanged=function(t,i){return this.each(function(){var e=this,a=n(this),r=e.value;a.keydown(function(){clearTimeout(e.mcnTxtThrottling),e.mcnTxtThrottling=setTimeout(function(){r=e.value,i(e,e.value)},t)}),a.blur(function(){r!=e.value&&(r=e.value,i(e,e.value))})})}}(jQuery),function(n){n.fn.transitionProperties=function(t,i,e){var a=n(this);return new WinJS.Promise(function(n,r){var o=t+" "+i+"ms ease-out",c=a.css("transition",o);e&&e(c),c.delay(i+10).promise().done(function(){a.css("-ms-transition",""),n(c)},function(){a.css("-ms-transition",""),r(c)})})}}(jQuery),function(n){n.fn.toWinJSPromise=function(){return new WinJS.Promise(function(n,t){var i=this.promise().done(function(){n(i)},function(){t(i)})})}}(jQuery),function(n){n.fn.renderWith=function(t,i){var e=n(t).get(0);return e&&(e=e.winControl),this.each(function(){var t=n(this);e&&e.render(null,i).done(function(n){t.append(n.children[0])})})}}(jQuery),function(n){n.fn.renderWithEach=function(t,i,e){var a=n(t).get(0);return a&&(a=a.winControl),this.each(function(){var t=n(this);a&&i.forEach(function(n){a.render(null,n).done(function(i){var a=i.children[0];t.append(a),e&&e(n,a)})})})}}(jQuery),function(n){n.fn.scrollInView=function(t){var i=Windows.UI.ViewManagement.ApplicationView.value,e=!0;return(i===Windows.UI.ViewManagement.ApplicationViewState.snapped||i===Windows.UI.ViewManagement.ApplicationViewState.fullScreenPortrait)&&(e=!1),this.each(function(){n(this);e?this.offsetParent.scrollLeft=this.offsetLeft-(t?t:0):this.offsetParent.scrollTop=this.offsetTop-(t?t:0)})}}(jQuery),function(n){n.fn.scrollInParentView=function(n){var t=Windows.UI.ViewManagement.ApplicationView.value,i=!0;return(t===Windows.UI.ViewManagement.ApplicationViewState.snapped||t===Windows.UI.ViewManagement.ApplicationViewState.fullScreenPortrait)&&(i=!1),this.each(function(){i?this.offsetParent.offsetParent.scrollLeft=this.offsetLeft-(n?n:0):this.offsetParent.offsetParent.scrollTop=this.offsetTop-(n?n:0)})}}(jQuery),function(n){n.fn.loadedPromises=function(t){var i=[];return this.each(function(){var e=(n(this),this),a=new WinJS.Promise(function(n,i){function a(n){e.removeEventListener("error",a),e.removeEventListener("load",r),i({message:"element not loaded",elt:n.currentTarget})}function r(){e.removeEventListener("error",a),e.removeEventListener("load",r),n(e),t&&t(e)}e.addEventListener("error",a),e.addEventListener("load",r,!1),e.naturalWidth>0&&r()});i.push(a)}),i},n.fn.whenLoaded=function(n){var t=this.loadedPromises();return n?void WinJS.Promise.join(t).done(function(t){n(t)}):WinJS.Promise.join(t)},n.fn.afterTransition=function(n,t){var i=[],e=!1;this.each(function(){var n=this,e=new WinJS.Promise(function(i){var e=function(t){t.srcElement===n&&a()},a=function(){clearTimeout(timeOutRef),n.removeEventListener("transitionend",e,!1),i()};n.addEventListener("transitionend",e,!1),timeOutRef=setTimeout(a,t||1e3)});i.push(e)});var a=null,r=null,o=new WinJS.Promise(function(n,t){a=n,r=t}),c=WinJS.Promise.join(i);return c.done(function(){return e?(c.cancel(),void r()):(e=!0,n&&n(),void a())},r),o},n.fn.afterAnimation=function(n){var t=[];return this.each(function(){var n=this,i=new WinJS.Promise(function(t){function i(e){e.srcElement===currentElement&&(n.removeEventListener("animationend",i),t())}n.addEventListener("animationend",i)});t.push(i)}),WinJS.Promise.join(t).done(function(){n&&n()}),this},n.fn.classBasedAnimation=function(t){return this.each(function(){var i=this;n(i).afterAnimation(function(){n(i).removeClass(t)}),n(i).addClass(t)})}}(jQuery);