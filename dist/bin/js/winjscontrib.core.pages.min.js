/* 
 * WinJS Contrib v2.0.3.0
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

var WinJSContrib;!function(e){var n;!function(n){var t;!function(n){function t(n,t){var r=WinJS.UI.Pages.define(n,t);return e.UI.Pages.fragmentMixin(r),r}function r(e){return}function i(e,n,t,r,i,o){var a=[];i&&a.push(WinJS.Promise.as(i.apply(e,r)));var s=n.querySelectorAll(".mcn-layout-ctrl");if(s&&s.length){for(var l=0,u=s.length;u>l;){var m=s[l];if(m){var c=m.winControl[t];c&&a.push(WinJS.Promise.as(c.apply(m.winControl,r)))}l+=1}return o&&a.push(WinJS.Promise.as(o.apply(e,r))),WinJS.Promise.join(a)}return WinJS.Promise.wrap()}function o(n,t,r,i){function o(n){r&&r.injectToPage&&e.Utils.inject(n,r.injectToPage),n.navigationState={location:t,state:r},i.oncreate&&i.oncreate(n.element,r),i.oninit&&n.elementReady.then(function(){i.oninit(n.element,r)}),i.onrender&&n.renderComplete.then(function(){i.onrender(n.element,r)}),i.onready&&n.renderComplete.then(function(){return n.readyComplete}).then(function(){i.onready(n.element,r)}),(n.enterPageAnimation||i.enterPage)&&(n._enterAnimation=n.enterPageAnimation?n.enterPageAnimation:i.enterPage,n.enterPageAnimation=function(){var e=this,n=null;return l.style.opacity="",n=e&&e.getAnimationElements?e.getAnimationElements(!1):e.element,n?e._enterAnimation(n):void 0}),i.closeOldPagePromise&&(n._beforelayoutPromise=i.closeOldPagePromise,n.onbeforelayout=function(){return this._beforelayoutPromise}),n.beforeShow||(n.beforeShow=[]),n.contentReadyComplete=n.renderComplete.then(function(){return e.UI.disableAutoResources?void 0:WinJS.Resources.processAll(l)}).then(function(){return n.elementReady}).then(function(){return m}).then(function(){return n.layoutComplete}).then(function(){return n.beforeShow.length?e.Promise.parallel(n.beforeShow,function(e){return WinJS.Promise.as(e())}):void 0}).then(function(){return n.enterPageAnimation?WinJS.Promise.as(n.enterPageAnimation(l,i)):void(n.element.style.opacity="")}).then(a,s)}var a,s;i=i||{};var l=document.createElement("div");l.setAttribute("dir",window.getComputedStyle(l,null).direction),l.style.opacity="0",n.appendChild(l);var u=new WinJS.Promise(function(e,n){a=e,s=n}),m=i.parented?WinJS.Promise.as(i.parented):null,c=WinJS.UI.Pages.get(t);return e.UI.Pages.fragmentMixin(c),setImmediate(function(){new c(l,r,o,m)}),u}n.defaultFragmentMixins=[{$:function(e){return this.element?$(e,this.element||this._element):void 0},q:function(e){return this.element?this.element.querySelector(e):void 0},qAll:function(e){if(this.element){var n=this.element.querySelectorAll(e);return n&&!n.forEach&&(n=[].slice.call(n)),n}},eventTracker:{get:function(){return this._eventTracker||(this._eventTracker=new e.UI.EventTracker),this._eventTracker}},promises:{get:function(){return this._promises||(this._promises=[]),this._promises}},addPromise:function(e){return this.promises.push(e),e},cancelPromises:function(){var e=this;if(e.promises)for(var n=0;n<e.promises.length;n++)e.promises[n]&&e.promises[n].cancel()}}],n.define=t,n.fragmentMixin=r,n.broadcast=i,n.renderFragment=o}(t=n.Pages||(n.Pages={}))}(n=e.UI||(e.UI={}))}(WinJSContrib||(WinJSContrib={}));