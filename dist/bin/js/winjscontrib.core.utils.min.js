/* 
 * WinJS Contrib v2.1.0.0
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

this.setImmediate||(this.setImmediate=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return setTimeout(t,0),0}),Object.map||(Object.map=function(t,n){var r={};return"object"!=typeof t?r:("function"!=typeof n&&(n=function(t,n){return[t,n]}),Object.keys(t).forEach(function(e){var i=n.apply(t,[e,t[e]]);i&&i.length&&(r[i[0]||e]=i[1])}),r)}),String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(n,r){return"undefined"!=typeof t[r]?t[r]:n})}),String.prototype.padLeft||(String.prototype.padLeft=function(t,n){return void 0===n&&(n="0"),this.length<t?(n+this).padLeft(t,n):this});var WinJSContrib;!function(t){var n;!function(t){function n(t,n){var r=WinJS.Promise.wrap(),e=[];if(!t)return WinJS.Promise.wrap([]);var i=WinJS.Promise.as(t);return i.then(function(t){for(var i=function(t,r){return t.then(function(){return WinJS.Promise.as(n(r)).then(function(t){e.push(t)})})},o=0,a=t.length;a>o;o++){var u=t[o];!u&&t.getItem&&(u=t.getItem(o)),r=i(r,u)}return r.then(function(){return e})})}function r(t,n){if(!t)return WinJS.Promise.wrap([]);var r=WinJS.Promise.as(t);return r.then(function(t){for(var r=[],e=0,i=t.length;i>e;e++){var o=t[e];!o&&t.getItem&&(o=t.getItem(e)),r.push(WinJS.Promise.as(n(o)))}return WinJS.Promise.join(r)})}function e(t,n,r){if(!t)return WinJS.Promise.wrap([]);var e=WinJS.Promise.as(t);return e.then(function(t){for(var e=WinJS.Promise.wrap(),i=[],o=[],a=!1,u=function(t,n){return t.then(function(){return WinJS.Promise.join(n.map(function(t){return WinJS.Promise.as(r(t))})).then(function(t){t=t.concat(t)},function(t){o=o.concat(t),a=!0})})},s=0,f=t.length;f>s;s++){var c=t[s];!c&&t.getItem&&(c=t.getItem(s)),i.push(c),s>0&&s%n===0&&(e=u(e,i),i=[])}return i.length&&(e=u(e,i)),e.then(function(){return a?WinJS.Promise.wrapError(o):o})})}t.waterfall=n,t.parallel=r,t.batch=e}(n=t.Promise||(t.Promise={}))}(WinJSContrib||(WinJSContrib={}));var WinJSContrib;!function(t){var n;!function(n){function r(){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(arguments[0][n]=arguments[t][n]);return arguments[0]}function e(t,n){if(!n)return!1;var r=t.match("^"+n)==n;return r}function i(t,n){return n?t.match(n+"$")==n:!1}function o(n){var r=[];for(var e in n)if(n.hasOwnProperty(e)){var i=encodeURIComponent(e),o=n[e],a=t.Utils.hasValue(o)?encodeURIComponent(o):"";r.push(i+"="+a)}return r.join("&")}function a(t,n,r,e){var i=document.createEvent("Event");i.initEvent(n,r,e),t.dispatchEvent(i)}function u(t,n,r,e,i){var o=document.createEvent("CustomEvent");o.initCustomEvent(n,r,e,i),t.dispatchEvent(o)}function s(t,n){if(t){if("this"===n)return t;var r=t[n];if("undefined"!=typeof r)return r;var e=n.indexOf("[");if(!(0>e)){var i=n.indexOf("]",e);if(!(0>i)){var o=n.substr(e+1,i-e);return o=parseInt(o),t[o]}}}}function f(n,r,e){if(t.Utils.hasValue(r))return n.setProperty?void n.setProperty(r,e):void(n[r]=e);if("string"==typeof r){var i=r.indexOf("[");if(0>i)return;var o=r.indexOf("]",i);if(0>o)return;var a=r.substr(i+1,o-i);a=parseInt(a),n[a]=e}}function c(n,r){if("string"==typeof r&&n[r])return n[r];if(!r||!r.length)return n;var e=t.Utils.getProperty(n,r);return e?e.propValue:void 0}function p(t,n){"string"==typeof n&&(n=n.split(".")),n&&n.length||(n=["this"]);for(var r=t,e=null,i=0;i<n.length;i++){var o=new T(r,e,n[i]);if(e=o,i==n.length-1)return o;r=s(r,n[i])}}function l(n,r,e){var i=t.Utils.getProperty(n,r);i&&(i.propValue=e)}function g(t,n){return Math.random()*(n-t+1)+t<<0}function v(t,n){return t>n?1:n>t?-1:0}function h(n,r,e){if(null===n||0===n.length)return n;"undefined"==typeof e&&(e=!1);var i,o,a="",u=0,s=[];if(e)for(o=0;o<n.length;o++){if(r){var f=t.Utils.readProperty(n[o],r.split("."));i=f,f||(i=f),f&&f.toLowerCase&&(i=f.toLowerCase())}else i=n[o];a.indexOf("|"+i+"|")<0&&(a+="|"+i+"|",s[u++]=n[o])}else for(o=0;o<n.length;o++)i=r?t.Utils.readProperty(n[o],r.split(".")):n[o],a.indexOf("|"+i+"|")<0&&(a+="|"+i+"|",s[u++]=n[o]);return s}function d(r,e,i){return n.distinctArray(r,e,i).map(function(n){return t.Utils.readProperty(n,e.split("."))})}function m(t){var n=t.toLowerCase();return n=n.replace(new RegExp("[àáâãäå]","g"),"a"),n=n.replace(new RegExp("æ","g"),"ae"),n=n.replace(new RegExp("ç","g"),"c"),n=n.replace(new RegExp("[èéêë]","g"),"e"),n=n.replace(new RegExp("[ìíîï]","g"),"i"),n=n.replace(new RegExp("ñ","g"),"n"),n=n.replace(new RegExp("[òóôõö]","g"),"o"),n=n.replace(new RegExp("œ","g"),"oe"),n=n.replace(new RegExp("[ùúûü]","g"),"u"),n=n.replace(new RegExp("[ýÿ]","g"),"y")}function y(t){var n=[];WinJS.Navigation.history&&WinJS.Navigation.history.backStack&&WinJS.Navigation.history.backStack.length&&WinJS.Navigation.history.backStack.forEach(function(r){r.location!==t&&n.push(r)}),WinJS.Navigation.history.backStack=n}function S(t){return(10>t?"0":"")+t}function P(t,n,r){if(!t)return"";var e=t.length>n,i=e?t.substr(0,n-1):t;return i=r&&e?i.substr(0,i.lastIndexOf(" ")):i,e?i+"...":i}function x(){var t=(new Date).getTime(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==n?r:7&r|8).toString(16)});return n}function w(t,n){if(t&&t.parentElement)for(var r=t.parentElement;r;){if(r.winControl&&void 0!==r.winControl[n])return r.winControl[n];r=r.parentElement}}function W(t,n){for(var r=[],e=0;e<t.children.length;e++)r.push(t.children[e]);r.forEach(function(t){n.appendChild(t)})}function C(t,n){for(var r=n.parentNode;r;){if(r[t]&&r.winControl)return r.winControl;r=r.parentNode}}function J(t,n){for(var r=n.parentNode;r;){if(r.classList&&r.classList.contains(t)&&r.winControl)return r.winControl;r=r.parentNode}}function b(n){return t.Utils.getParent("mcnPage",n)}function U(t){for(var n=t.parentNode;n;){if(n.msParentSelectorScope){var r=n.parentNode;if(r){var e=r.winControl;if(e)return e}}n=n.parentNode}}function E(t){if(t){var n=typeof t;if("string"==n)return new WinJS.Binding.Template(null,{href:t});if("function"==n)return{render:function(n,r){var e=t(n,r);return WinJS.Promise.as(e)}};if(t.winControl)return t.winControl;if(t.render)return t}}function k(n,r){var e=t.Utils.resolveValue(n,r);return e&&"function"==typeof e?e:void 0}function I(n,r){var e=t.Utils.resolveValue(n,r);return e?"function"==typeof e?e(n):e:void 0}function R(t,r){var e=r.split(":");if(e.length>1){var i=e[0],o=r.substr(i.length+1),a=n.ValueParsers[i];if(a)return a(t,o)}return r}function O(t){return"undefined"!=typeof t&&null!==t}function V(t){return"{0} - {1}: {2}".format(t.status,t.statusText,t.responseText)}function D(t){return function(n){for(var r=null,e=0;e<n.length;e++){var i=n[e];if("undefined"!=typeof i){r=i;break}}return t(r)}}function N(t,n){if(n)for(var r in n)t[r]=n[r]}n.extend=r,n.startsWith=e,String.prototype.startsWith||(String.prototype.startsWith=function(n){return t.Utils.startsWith(this,n)}),n.endsWith=i,String.prototype.endsWith||(String.prototype.endsWith=function(n){return t.Utils.endsWith(this,n)}),n.queryStringFrom=o,n.triggerEvent=a,n.triggerCustomEvent=u,n.readProperty=c;var T=function(){function t(t,n,r){this.parent=t,this.parentDescriptor=n,this.keyProp=r}return t.prototype.ensureParent=function(){return parent?parent:void(this.parentDescriptor&&(this.parentDescriptor.ensureParent(),this.parentDescriptor.parent[this.parentDescriptor.keyProp]||(this.parentDescriptor.parent[this.parentDescriptor.keyProp]={},this.parent=this.parentDescriptor.parent[this.parentDescriptor.keyProp])))},Object.defineProperty(t.prototype,"propValue",{get:function(){return s(this.parent,this.keyProp)},set:function(t){this.ensureParent(),f(this.parent,this.keyProp,t)},enumerable:!0,configurable:!0}),t}();n.PropertyDescriptor=T,n.getProperty=p,n.writeProperty=l,n.randomFromInterval=g,n.alphabeticSort=v,n.distinctArray=h,n.getDistinctPropertyValues=d,n.removeAccents=m,n.removePageFromHistory=y,n.pad2=S,n.ellipsisizeString=P,n.guid=x,n.inherit=w,n.moveChilds=W,n.getParent=C,n.getParentControlByClass=J,n.getParentPage=b,n.getScopeControl=U,n.getTemplate=E,n.resolveMethod=k,n.readValue=I,n.ValueParsers={navpage:function(n,r){var e=null;if(t.Utils.getParentPage&&(e=t.Utils.getParentPage(n)),!e&&t.UI.Application.navigator&&(e=t.UI.Application.navigator.pageControl),e){var i=t.Utils.readProperty(e,r);return i&&"function"==typeof i?i.bind(e):i}},page:function(n,r){var e=t.Utils.getParentControlByClass("pagecontrol",n),i=t.Utils.readProperty(e,r);return i&&"function"==typeof i?i.bind(e):i},ctrl:function(n,r){var e=t.Utils.getScopeControl(n),i=t.Utils.readProperty(e,r);return i&&"function"==typeof i?i.bind(e):i},select:function(n,r){var e=t.Utils.getScopeControl(n),n=null;return e&&(n=e.element.querySelector(r)),n||(n=document.querySelector(r)),n},obj:function(n,r){return WinJS.UI.optionsParser(r,window,{select:WinJS.Utilities.markSupportedForProcessing(function(r){var e=t.Utils.getScopeControl(n);return e?e.element.querySelector(r):document.querySelector(r)})})},prom:function(t,n){var r=R(t,n);return r.then&&(r.mcnMustResolve=!0),r},list:function(t,n){var r=R(t,n);if(r.then){var e=r.then(function(t){return new WinJS.Binding.List(t).dataSource});return e.mcnMustResolve=!0,e}return new WinJS.Binding.List(r).dataSource},global:function(n,r){return t.Utils.readProperty(window,r)}},n.resolveValue=R,n.hasValue=O,n.formatXHRError=V,n.unwrapJoinError=D,n.inject=N}(n=t.Utils||(t.Utils={}))}(WinJSContrib||(WinJSContrib={}));var WinJSContrib;!function(t){var n;!function(n){function r(t){var n=o[t];return o[t]?n:new WinJS.Binding.Template(null,{href:t})}function e(n,r){var e=t.Templates.get(n);if(e)return t.Templates.makeInteractive(e,r);throw{message:"template not found for "+n}}function i(n,r){return function(e){return e.then(function(e){return n.render(e).then(function(n){if(r.tap)for(var i in r.tap){var o=n.querySelector(i);t.UI.tap(o,function(t){r.tap[i](t,e)})}if(r.click)for(var i in r.click){var o=n.querySelector(i);o.onclick=function(t){r.click[i](t,e)}}return n})})}}var o={};n.get=r,n.interactive=e,n.makeInteractive=i}(n=t.Templates||(t.Templates={}))}(WinJSContrib||(WinJSContrib={}));