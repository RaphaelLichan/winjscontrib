/* 
 * WinJS Contrib v2.0.3.0
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

var WinJSContrib;!function(n){var e;!function(e){function t(n,e){for(var t=0,i=0,a=n.clientWidth,r=n.clientHeight;n&&n!=e;)t+=n.offsetLeft-n.scrollLeft+n.clientLeft,i+=n.offsetTop-n.scrollTop+n.clientTop,n=n.offsetParent;return{x:t,y:i,width:a,height:r}}function i(){var n=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(n&&n.length)for(var e=0;e<n.length;e++){var t=n[e];t.winControl&&t.winControl.show()}}function a(){var n=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(n&&n.length)for(var e=0;e<n.length;e++){var t=n[e];t.winControl&&t.winControl.hide()}}function r(){var n=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(n&&n.length)for(var e=0;e<n.length;e++){var t=n[e];t.winControl&&(t.winControl.disabled=!0)}}function o(){var n=document.querySelectorAll('div[data-win-control="WinJS.UI.AppBar"],div[data-win-control="WinJS.UI.NavBar"]');if(n&&n.length)for(var e=0,t=n.length;t>e;e++){var i=n[e];i.winControl&&(i.winControl.disabled=!1)}}function c(n,e){return new WinJS.Promise(function(t,i){function a(){n.onload=void 0,n.onerror=void 0,n.onreadystatechange=void 0,i("element not loaded")}function r(){n.onload=void 0,n.onerror=void 0,n.onreadystatechange=void 0,t({element:n,url:e})}n.onerror=a,n.onload=r,n.onreadystatechange=r,n.naturalWidth>0&&r(void 0),n.src=e})}function s(n){return new WinJS.Promise(function(e,t){function i(){r.onload=void 0,r.onerror=void 0,t({message:"image not loaded : "+n,path:n})}function a(){r.onload=void 0,r.onerror=void 0,e({element:r,url:n})}var r=new Image;r.onerror=i,r.onload=a,r.naturalWidth>0&&a(void 0),r.src=n})}function p(n){var e=[],t=!1;if(n.parentElement)for(var i=n.parentElement,a=0;a<i.children.length;a++)i.children[a]===n?t=!0:t&&e.push(i.children[a]);return e}function l(e){return new WinJS.Promise(function(t){var i=n.UI.listElementsAfterMe(e),a=WinJS.UI.Animation.createDeleteFromListAnimation([e],i);e.style.position="fixed",e.style.opacity="0",a.execute().done(function(){t(e)})})}function d(e,t,i){e.classList.add("page-action");var a=e.dataset.pageAction,r=i[a];r&&"function"==typeof r&&n.UI.tap(e,function(e){var t=e.dataset.pageActionArgs;if(t&&"string"==typeof t)try{var r=n.Utils.readValue(e,t);t=r?r:JSON.parse(t)}catch(o){return}i[a].bind(i)({elt:e,args:t})})}function u(n,e){var t=n.querySelectorAll("*[data-page-action]");if(t&&t.length)for(var i=0,a=t.length;a>i;i++){var r=t[i];d(r,n,e)}}function v(e){e.classList.add("page-link");var t=e.dataset.pageLink;if(t&&t.indexOf("/")<0){var i=n.Utils.readProperty(window,t);i&&(t=i)}t&&n.UI.tap(e,function(e){var i=e.dataset.pageActionArgs;if(i&&"string"==typeof i)try{var a=n.Utils.readValue(e,i);i=a?a:JSON.parse(i)}catch(r){return}if(n.UI.parentNavigator&&n.UI.parentNavigator(e)){var o=n.UI.parentNavigator(e);o.navigate(t,i)}else WinJS.Navigation.navigate(t,i)})}function m(n){var e=n.querySelectorAll("*[data-page-link]");if(e&&e.length)for(var t=0,i=e.length;i>t;t++){var a=e[t];v(a,n)}}function f(n){for(var e=n.parentNode;e;){if(e.mcnNavigator)return e.winControl;e=e.parentNode}}function g(n,e,t){n.classList.add("page-member");var i=n.dataset.pageMember;i||(i=n.id),i&&!t[i]&&(t[i]=n,n.winControl&&(t[i]=n.winControl))}function h(n,e){var t=n.querySelectorAll("*[data-page-member]");if(t&&t.length)for(var i=0,a=t.length;a>i;i++){var r=t[i];g(r,n,e)}}function T(e,t){n.UI.bindPageActions(e,t),n.UI.bindPageLinks(e)}function k(e,t){function i(n){var e=new WinJS.Promise(function(){});n.detail.setPromise(e),e.cancel()}var a=[];e.navLocks=e.navLocks||[],e.navLocks.isActive=!0;for(var r=function(n){e.navLocks&&0!==e.navLocks.length||t.bind(e)(n)},o=document.querySelectorAll(".mcn-navigation-ctrl"),c=0;c<o.length;c++){var s=o[c].winControl;s&&s!=e&&(s.navLocks=s.navLocks||[],s.navLocks.isActive&&(!s.navLocks.length||s.navLocks.indexOf(e)<0)&&(s.navLocks.push(e),a.push(s)))}return WinJS.Navigation.addEventListener("beforenavigate",i),window.Windows&&window.Windows.Phone?window.Windows.Phone.UI.Input.HardwareButtons.addEventListener("backpressed",r):document.addEventListener("backbutton",r),n.UI.Application&&n.UI.Application.navigator&&n.UI.Application.navigator.addLock(),function(){n.UI.Application&&n.UI.Application.navigator&&n.UI.Application.navigator.removeLock(),e.navLocks.isActive=!1,a.forEach(function(n){var t=n.navLocks.indexOf(e);t>=0&&n.navLocks.splice(t,1)}),WinJS.Navigation.removeEventListener("beforenavigate",i),window.Windows&&window.Windows.Phone?window.Windows.Phone.UI.Input.HardwareButtons.removeEventListener("backpressed",r):document.removeEventListener("backbutton",r)}}function w(n){n&&n.mcnTapTracking&&(n.mcnTapTracking.dispose(),n.mcnTapTracking=null)}function y(n){if(n)for(var e=n.querySelectorAll(".tap"),t=0,i=e.length;i>t;t++)w(e[t])}function b(e,t,i){if(e){var a=function(n){var e=n.currentTarget||n.target,t=e.mcnTapTracking;t&&(void 0===n.button||0===n.button||t.allowRickClickTap&&2===n.button)&&(t.lock&&(n.pointerId&&n.currentTarget.setPointerCapture&&n.currentTarget.setPointerCapture(n.pointerId),n.stopPropagation(),n.preventDefault()),WinJS.Utilities.addClass(e,"tapped"),t.pointerdown=n.changedTouches?{x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY}:{x:n.clientX,y:n.clientY},t.animDown(n.currentTarget),t.tapOnDown&&t.callback(e))},r=function(n){var e=n.currentTarget||n.target,t=e.mcnTapTracking;t&&t.pointerdown&&(WinJS.Utilities.removeClass(e,"tapped"),n.pointerId&&e.releasePointerCapture&&e.releasePointerCapture(n.pointerId),t.disableAnimation||t.animUp(n.currentTarget))},o=function(n){var e=n.currentTarget||n.target,t=e.mcnTapTracking;if(t&&(void 0===n.button||0===n.button||t.allowRickClickTap&&2===n.button)){if(e.releasePointerCapture&&e.releasePointerCapture(n.pointerId),t&&!t.tapOnDown){n.stopPropagation();var i=function(){if(t&&t.pointerdown){if(n.changedTouches)var i=Math.abs(t.pointerdown.x-n.changedTouches[0].clientX),a=Math.abs(t.pointerdown.y-n.changedTouches[0].clientY);else var i=Math.abs(t.pointerdown.x-n.clientX),a=Math.abs(t.pointerdown.y-n.clientY);t.callback&&15>i&&15>a&&(n.stopImmediatePropagation(),n.stopPropagation(),n.preventDefault(),t.callback(e)),t&&t.pointerdown&&(t.pointerdown=void 0)}};t.awaitAnim?t.animUp(e).done(i):(t.animUp(e),i())}WinJS.Utilities.removeClass(e,"tapped")}},c=i||{};e.mcnTapTracking&&e.mcnTapTracking.dispose(),WinJS.Utilities.addClass(e,"tap"),e.mcnTapTracking=e.mcnTapTracking||{},e.mcnTapTracking.eventTracker=new n.UI.EventTracker,e.mcnTapTracking.disableAnimation=c.disableAnimation,e.mcnTapTracking.disableAnimation?(e.mcnTapTracking.animDown=function(){return WinJS.Promise.wrap()},e.mcnTapTracking.animUp=function(){return WinJS.Promise.wrap()}):(e.mcnTapTracking.animDown=c.animDown||WinJS.UI.Animation.pointerDown,e.mcnTapTracking.animUp=c.animUp||WinJS.UI.Animation.pointerUp),e.mcnTapTracking.element=e,e.mcnTapTracking.callback=t,e.mcnTapTracking.lock=c.lock,e.mcnTapTracking.awaitAnim=c.awaitAnim||!1,e.mcnTapTracking.disableAnimation=c.disableAnimation,e.mcnTapTracking.tapOnDown=c.tapOnDown,e.mcnTapTracking.pointerModel="none",e.mcnTapTracking.dispose=function(){WinJS.Utilities.removeClass(e,"tap"),this.eventTracker.dispose(),e.mcnTapTracking=null,e=null},void 0!==e.onpointerdown?(e.mcnTapTracking.pointerModel="pointers",e.mcnTapTracking.eventTracker.addEvent(e,"pointerdown",a),e.mcnTapTracking.eventTracker.addEvent(e,"pointerout",r),e.mcnTapTracking.eventTracker.addEvent(e,"pointerup",o)):window.Touch&&!c.noWebkitTouch?(e.mcnTapTracking.pointerModel="touch",e.mcnTapTracking.eventTracker.addEvent(e,"touchstart",function(n){e.mcnTapTracking.cancelMouse=!0,a(n)}),e.mcnTapTracking.eventTracker.addEvent(e,"touchcancel",function(n){setTimeout(function(){e.mcnTapTracking.cancelMouse=!1},1e3),r(n)}),e.mcnTapTracking.eventTracker.addEvent(e,"touchend",function(n){setTimeout(function(){e.mcnTapTracking.cancelMouse=!1},1e3),o(n)}),e.mcnTapTracking.eventTracker.addEvent(e,"mousedown",function(n){e.mcnTapTracking.cancelMouse||a(n)}),e.mcnTapTracking.eventTracker.addEvent(e,"mouseleave",function(n){r(n)}),e.mcnTapTracking.eventTracker.addEvent(e,"mouseup",function(n){e.mcnTapTracking.cancelMouse?r(n):o(n)})):(e.mcnTapTracking.pointerModel="mouse",e.mcnTapTracking.eventTracker.addEvent(e,"mousedown",a),e.mcnTapTracking.eventTracker.addEvent(e,"mouseleave",r),e.mcnTapTracking.eventTracker.addEvent(e,"mouseup",o))}}function A(n,e){var t=null;return new WinJS.Promise(function(i){var a=function(e){e.srcElement===n&&r()},r=function(){clearTimeout(t),n.removeEventListener("transitionend",a,!1),i()};n.addEventListener("transitionend",a,!1),t=setTimeout(r,e||1e3)})}e.Application={},e.disableAutoResources=!1,e.offsetFrom=t;var U=function(){function n(){this.events=[]}return n.prototype.addEvent=function(n,e,t,i){var a=this;n.addEventListener(e,t,i);var r=function(){try{n.removeEventListener(e,t);var i=a.events.indexOf(r);i>=0&&a.events.splice(i,1)}catch(o){console.error("unexpected error while releasing callback "+o.message)}};return this.events.push(r),r},n.prototype.addBinding=function(n,e,t){n.bind(e,t);var i=function(){n.unbind(e,t)};return this.events.push(i),i},n.prototype.dispose=function(){for(var n=0;n<this.events.length;n++)this.events[n]();this.events=[]},n}();e.EventTracker=U,e.appbarsOpen=i,e.appbarsClose=a,e.appbarsDisable=r,e.appbarsEnable=o,e.elementLoaded=c,e.loadImage=s,e.listElementsAfterMe=p,e.removeElementAnimation=l,e.bindPageActions=u,e.bindPageLinks=m,e.parentNavigator=f,e.bindMembers=h,e.bindActions=T;var E=function(){function n(n,e){var t=this;t.queries=[],t.linkedControl=e;for(var i in n){var a=n[i];a.query&&t.registerMediaEvent(i,a.query,a)}}return n.prototype.dispose=function(){var n=this;n.linkedControl=null,this.queries.forEach(function(n){n.dispose()})},n.prototype.registerMediaEvent=function(n,e,t){var i=this,a=window.matchMedia(e),r={name:n,query:e,data:t,mq:a,dispose:null},o=function(n){n.matches&&i._mediaEvent(n,r)};a.addListener(o),r.dispose=function(){a.removeListener(o)},i.queries.push(r)},n.prototype._mediaEvent=function(n,e){var t=this;t.linkedControl&&WinJS.UI.setOptions(t.linkedControl,e.data),t.dispatchEvent("media",e)},n.prototype.check=function(){var n=this;n.queries.forEach(function(e){var t=window.matchMedia(e.query);t.matches&&n._mediaEvent({matches:!0},e)})},n.prototype.addEventListener=function(){},n.prototype.dispatchEvent=function(){return!1},n.prototype.removeEventListener=function(){},n}();e.MediaTrigger=E,WinJS.Class.mix(n.UI.MediaTrigger,WinJS.Utilities.eventMixin),e.registerNavigationEvents=k,e.untap=w,e.untapAll=y,e.tap=b,e.afterTransition=A;var I=function(){function e(n,e,t,i){this.element=document.createElement(n),e&&(this.element.className=e),t&&t.appendChild(this.element),this.parent=i,this.childs=[],i&&i.childs.push(this)}return Object.defineProperty(e.prototype,"control",{get:function(){return this.element.winControl},enumerable:!0,configurable:!0}),e.prototype.addClass=function(n){return this.element.classList.add(n),this},e.prototype.className=function(n){return this.element.className=n,this},e.prototype.opacity=function(n){return this.element.style.opacity=n,this},e.prototype.display=function(n){return this.element.style.display=n,this},e.prototype.hide=function(){return this.element.style.display="none",this},e.prototype.visibility=function(n){return this.element.style.visibility=n,this},e.prototype.text=function(n){return this.element.innerText=n,this},e.prototype.html=function(n){return this.element.innerHTML=n,this},e.prototype.attr=function(n,e){return this.element.setAttribute(n,e),this},e.prototype.style=function(n,e){return this.element.style[n]=e,this},e.prototype.appendTo=function(n){return n.appendChild(this.element),this},e.prototype.tap=function(e,t){return n.UI.tap(this.element,e,t),this},e.prototype.append=function(n,t,i){var a=new e(n,t,this.element,this);return i&&i(a),this},e.prototype.ctrl=function(e,t){var i=e;return"string"==typeof e&&(i=n.Utils.readProperty(window,e)),i&&new i(this.element,t),this},e}();e.FluentDOM=I}(e=n.UI||(n.UI={}))}(WinJSContrib||(WinJSContrib={}));