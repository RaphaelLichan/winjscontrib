/* 
 * WinJS Contrib v2.1.0.6
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

!function(){WinJS.Namespace.define("WinJSContrib.UI",{parentChildView:function(e){for(var i=e.parentNode;i;){if(i.mcnChildnav)return i.winControl;i=i.parentNode}},ChildViewFlyout:WinJS.Class.mix(WinJS.Class.define(function(e,i){e.winControl=this,i=i||{},this.element=e||document.createElement("div"),i.inplace?this.rootElement=this.element:(this.rootElement=document.createElement("div"),this.rootElement.mcnChildnav=!0,this.rootElement.winControl=this,this.element.style.display="none"),document.body.appendChild(this.rootElement),this.navigationEvents=i.navigationEvents,this.element.mcnChildnav=!0,this.element.classList.add("mcn-childview"),this.element.classList.add("win-disposable"),this.rootElement.classList.add("childNavigator"),this.rootElement.classList.add("hidden"),this.element.classList.add("mcn-navigation-ctrl"),this.target=i.target||null,this._createContent(i),this.isOpened=!1,this.hardwareBackBtnPressedBinded=this.hardwareBackBtnPressed.bind(this),this.childContentKeyUp=this._childContentKeyUp.bind(this)},{_createContent:function(e){{var i=this,n=WinJSContrib.UI.FluentDOM;new n("DIV")}i.overlay=new n("DIV").addClass("childNavigator-overlay").appendTo(i.rootElement).tap(i.hide.bind(i),{disableAnimation:!0,disableAria:!0}).element,i.contentPlaceholder=new n("DIV","childNavigator-contentPlaceholder",i.rootElement).append("DIV",null,function(e){i.navigator=new WinJSContrib.UI.PageControlNavigator(e.element,{global:!1}),i.navigator.animations.enterPage=WinJS.UI.Animation.fadeIn,i.navigator.hide=function(e){return i.hide(e)}}).element,e&&e.closeBtn&&e.closeBtn.active&&(i.closebtn=new n("DIV","mcn-close-btn",i.contentPlaceholder),e.closeBtn.templatetext&&i.closebtn.html(e.closeBtn.templatetext),e.closeBtn["class"]?i.closebtn.className(i.closebtn.element.className+" "+e.closeBtn["class"]):e.closeBtn.templatetext||i.closebtn.className(i.closebtn.element.className+" default-icon"),WinJSContrib.UI.tap(i.closebtn.element,function(){i.closePage()}))},navigate:function(e,i,n){var t=this;return t.navigator.navigate(e,i)},pageControl:{get:function(){return this.container&&this.container.winControl}},clear:function(e){var i=this;return new WinJS.Promise(function(n,t){WinJS.Promise.wrap(i.closePage(null,null,e)).done(function(){i.navigator.clear(),i.navigator.element.innerText="",i.location=void 0,n()})})},closePage:function(e,i,n){var t=this,o=n?WinJS.Promise.wrap(!0):t.canClose(),a=o.then(function(n){if(!n)return WinJS.Promise.wrapError();t.navigator.pagesCount;return 1==t.navigator.pagesCount?t.hide(e,null,!0):(t.navigator.triggerPageExit(),t.navigator.closePage(i).then(function(){WinJSContrib.UI.Application.progress&&WinJSContrib.UI.Application.progress.hide()}))});return t.closePagePromise=t.closePagePromise?t.closePagePromise.then(function(){return a},function(){}).then(function(){return n?WinJS.Promise.wrap(!0):t.canClose()}):a,a},back:function(e){var i=this;return i.navigator.back(e)},canGoBack:function(){return that.navigator.canGoBack},_childContentKeyUp:function(e){"Esc"===e.key&&this.hide()},hardwareBackBtnPressed:function(e){var i=this;i.navigator._checkBackNavigation(e)||(i.hide(),e.handled=!0)},show:function(e){var i=this;return i.target&&i.target.classList.add("childview-target"),i.isOpened?WinJS.Promise.wrap():(WinJSContrib.UI&&WinJSContrib.UI.enableSystemBackButtonVisibility&&window.Windows&&window.Windows.UI&&window.Windows.UI.Core&&window.Windows.UI.Core.SystemNavigationManager&&(systemNavigationManager=window.Windows.UI.Core.SystemNavigationManager.getForCurrentView(),systemNavigationManager.appViewBackButtonVisibility===window.Windows.UI.Core.AppViewBackButtonVisibility.collapsed&&(systemNavigationManager.appViewBackButtonVisibility=window.Windows.UI.Core.AppViewBackButtonVisibility.visible)),document.body.addEventListener("keyup",i.childContentKeyUp),i.isOpened=!0,this.addDismissableClass("visible"),this.addDismissableClass("enter"),this.removeDismissableClass("leave"),this.removeDismissableClass("hidden"),i.rootElement.getBoundingClientRect(),i.navEventsHandler=WinJSContrib.UI.registerNavigationEvents(i,this.hardwareBackBtnPressedBinded),i.navigationEvents&&i.navigator.addNavigationEvents(),i.hideChildViewPromise=null,i.showChildViewPromise=WinJS.Promise.timeout().then(function(){return i.addDismissableClass("enter-active"),WinJSContrib.UI.afterTransition(i.contentPlaceholder).then(function(){i.contentPlaceholder.classList.contains("enter")})}),i.showChildViewPromise)},addDismissableClass:function(e){var i=this;i.overlay.classList.add(e),i.contentPlaceholder.classList.add(e),i.rootElement.classList.add(e),i.target&&i.target.classList.add("childview-"+e)},removeDismissableClass:function(e){var i=this;i.overlay.classList.remove(e),i.overlay.classList.remove(e+"-active"),i.contentPlaceholder.classList.remove(e),i.contentPlaceholder.classList.remove(e+"-active"),i.rootElement.classList.remove(e),i.rootElement.classList.remove(e+"-active"),i.target&&(i.target.classList.remove("childview-"+e),i.target.classList.remove("childview-"+e+"-active"))},pick:function(e,i,n){var t=this;i=i||{},t.pickPromises=t.pickPromises||[];var o=new WinJS.Promise(function(o,s){var r=!1,l=null,c=function(e){a(),l&&l.removeEventListener("closing",c),t.removeEventListener("beforehide",c),r||(r=!0,o({completed:!1,data:null}))};i.navigateStacked=!0,i.injectToPage={close:function(e){a(),r=!0,c(),l&&l.removeEventListener("closing",c),t.removeEventListener("beforehide",c),t.closePage(e,this.element||this.rootElement).then(function(){o({completed:!0,data:e})})},cancel:function(){c(),t.closePage()}};var d=JSON.parse(JSON.stringify(i));d.navigateStacked=!0,t.open(e,i,n).then(function(e){l=t.navigator.pageControl,l&&l.addEventListener("closing",c),t.addEventListener("beforehide",c,!1)})}),a=function(){var e=t.pickPromises.indexOf(o);t.pickPromises.splice(e,1)};return t.pickPromises.push(o),o.then(a),o},open:function(e,i,n){var t=this;t.rootElement.classList.add("visible"),t.dispatchEvent("beforeshow");var o=WinJS.Promise.wrap();return t.isOpened||(o=t.show(!0)),t.openChildViewPromise=WinJS.Promise.join({show:WinJSContrib.UI.afterTransition(t.contentPlaceholder),navigate:t.navigate(e,i,n).done(function(e){t.dispatchEvent("aftershow")})}),t.openChildViewPromise},canClose:function(){return this.navigator.pageControl&&this.navigator.pageControl.canClose?WinJS.Promise.as(this.navigator.pageControl.canClose()).then(function(e){return e}):WinJS.Promise.wrap(!0)},hide:function(e,i,n){var t=this;if(t.isOpened){t.isOpened=!1,t.showChildViewPromise=null,t.closePagePromise=null,t.openChildViewPromise=null;var o=n?WinJS.Promise.wrap(!0):t.canClose();return t.hideChildViewPromise=o.then(function(i){return t.contentPlaceholder.classList.contains("enter")||t.contentPlaceholder.classList.contains("enter-active")?(t.addDismissableClass("leave"),i?(t.pickPromises&&t.pickPromises.forEach(function(e){e.cancel()}),document.body.removeEventListener("keyup",t.childContentKeyUp),t.dispatchEvent("beforehide",e),t.navigator.canGoBack||WinJS.Navigation.canGoBack||WinJSContrib.UI&&WinJSContrib.UI.enableSystemBackButtonVisibility&&window.Windows&&window.Windows.UI&&window.Windows.UI.Core&&window.Windows.UI.Core.SystemNavigationManager&&(systemNavigationManager=window.Windows.UI.Core.SystemNavigationManager.getForCurrentView(),systemNavigationManager.appViewBackButtonVisibility===window.Windows.UI.Core.AppViewBackButtonVisibility.visible&&(systemNavigationManager.appViewBackButtonVisibility=window.Windows.UI.Core.AppViewBackButtonVisibility.collapsed)),t.navEventsHandler&&(t.navEventsHandler(),t.navigator.removeNavigationEvents(),t.navEventsHandler=null),WinJS.Promise.timeout().then(function(){return t.removeDismissableClass("enter"),t.addDismissableClass("leave-active"),WinJS.Promise.join({overlay:WinJSContrib.UI.afterTransition(t.overlay,1e3),content:WinJSContrib.UI.afterTransition(t.contentPlaceholder,1e3)}).then(function(){t.contentPlaceholder.classList.contains("leave")&&(t.clear(!0),t.removeDismissableClass("visible"),t.addDismissableClass("hidden"),t.removeDismissableClass("leave"),t.dispatchEvent("afterhide",e))})})):!1):void 0}),t.hideChildViewPromise}return WinJS.Promise.wrap(!0)},dispose:function(){this.rootElement.winControl=null,WinJS.Utilities.disposeSubTree(this.rootElement),WinJS.Utilities.disposeSubTree(this.element),this.rootElement.parentElement.removeChild(this.rootElement)}}),WinJS.Utilities.eventMixin,WinJS.Utilities.createEventProperties("beforeshow","beforehide","aftershow","afterhide"))})}();